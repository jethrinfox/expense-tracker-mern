(this["webpackJsonpexpense-tracker-mern"]=this["webpackJsonpexpense-tracker-mern"]||[]).push([[0],{84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a.n(n),s=a(24),i=a.n(s),o=a(13),l=a(8),j=a(6),d=a.n(j),u=a(11),b=a(21),p=a(9),O=a(7),h=function(e,t){switch(t.type){case"FETCH_ALL_TRANSACTION":return Object(O.a)(Object(O.a)({},e),{},{transactions:t.payload,loading:!1});case"DELETE_TRANSACTION":return Object(O.a)(Object(O.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(O.a)(Object(O.a)({},e),{},{transactions:[].concat(Object(p.a)(e.transactions),[t.payload])});case"USER_REGISTER":return Object(O.a)(Object(O.a)({},e),{},{isLoggedIn:!0,user:t.payload,loading:!1});case"USER_LOGOUT":return Object(O.a)(Object(O.a)({},e),{},{isLoggedIn:!1,user:t.payload});case"ERROR":return Object(O.a)(Object(O.a)({},e),{},{error:t.payload,loading:!1});case"LOADING":return Object(O.a)(Object(O.a)({},e),{},{loading:t.payload});default:return e}},x=a(47),m={transactions:[],error:null,user:null,isLoggedIn:!1,loading:!1},y=a.n(x).a.create({withCredentials:!0,baseURL:"https://evening-escarpment-92494.herokuapp.com"}),g=Object(n.createContext)(m),f=function(e){var t=e.children,a=Object(n.useReducer)(h,m),c=Object(b.a)(a,2),s=c[0],i=c[1];function o(){return(o=Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.user){e.next=13;break}return t="/api/v1/transaction?user_id=".concat(s.user._id),i({type:"LOADING",payload:!0}),e.prev=3,e.next=6,y.get(t);case 6:a=e.sent,i({type:"FETCH_ALL_TRANSACTION",payload:a.data.data}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),i({type:"ERROR",payload:e.t0.response.data.error});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function l(){return(l=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.delete("/api/v1/transaction/".concat(t));case 3:i({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function j(){return(j=Object(u.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,y.post("/api/v1/transaction/",t,a);case 4:r=e.sent,i({type:"ADD_TRANSACTION",payload:r.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i({type:"ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function p(){return(p=Object(u.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},i({type:"LOADING",payload:!0}),e.prev=2,e.next=5,y.post("/api/v1/user/",t,a);case 5:r=e.sent,i({type:"USER_REGISTER",payload:r.data.user}),e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(2),"User already exists"!==e.t0.response.data.error){e.next=14;break}return i({type:"ERROR",payload:"User already exists"}),e.abrupt("return");case 14:i({type:"ERROR",payload:"Error"});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function O(){return(O=Object(u.a)(d.a.mark((function e(t){var a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},i({type:"LOADING",payload:!0}),e.prev=2,e.next=5,y.post("/api/v1/user/login",t,a);case 5:r=e.sent,i({type:"USER_REGISTER",payload:r.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i({type:"ERROR",payload:"Error"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function x(){return(x=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"LOADING",payload:!0}),e.prev=1,e.next=4,y.get("/api/v1/user/");case 4:(t=e.sent).data.success&&i({type:"USER_REGISTER",payload:t.data.user}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i({type:"ERROR",payload:"No user session"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function f(){return(f=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.remove("/api/v1/user/");case 3:i({type:"USER_LOGOUT",payload:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"USER_LOGOUT",payload:null});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(r.jsx)(g.Provider,{value:{transactions:s.transactions,error:s.error,user:s.user,isLoggedIn:s.isLoggedIn,loading:s.loading,deleteTransaction:function(e){return l.apply(this,arguments)},addTransaction:function(e){return j.apply(this,arguments)},signUp:function(e){return p.apply(this,arguments)},login:function(e){return O.apply(this,arguments)},getUser:function(){return x.apply(this,arguments)},logOut:function(){return f.apply(this,arguments)},fetchAllData:function(){return o.apply(this,arguments)}},children:t})},v=a(23),R=a(91),E=a(87),C=function(){var e=Object(n.useContext)(g).login,t=Object(v.a)(),a=t.register,c=t.handleSubmit;return Object(r.jsx)("div",{className:"inner",children:Object(r.jsxs)(R.a,{onSubmit:c((function(t){var a=Object(O.a)({},t);e(a)})),children:[Object(r.jsx)("h3",{children:"Log in"}),Object(r.jsxs)(R.a.Group,{className:"form-group",children:[Object(r.jsx)(R.a.Label,{children:"Email"}),Object(r.jsx)(R.a.Control,{name:"email",required:!0,autoFocus:!0,type:"email",placeholder:"Enter your email",ref:a({required:!0})})]}),Object(r.jsxs)(R.a.Group,{className:"form-group",children:[Object(r.jsx)(R.a.Label,{children:"Password"}),Object(r.jsx)(R.a.Control,{name:"password",required:!0,type:"password",placeholder:"Enter your password",ref:a({required:!0})})]}),Object(r.jsx)(R.a.Group,{className:"form-group",children:Object(r.jsx)(R.a.Check,{type:"switch",id:"custom-switch",label:"Remember me"})}),Object(r.jsx)(E.a,{type:"submit",block:!0,variant:"dark",size:"lg",children:"Sign in"}),Object(r.jsxs)("p",{className:"forgot-password text-right",children:["Need an ",Object(r.jsx)(o.b,{to:"/signup",children:"Account?"})]})]})})},L=function(){var e=Object(n.useContext)(g).signUp,t=Object(v.a)(),a=t.register,c=t.handleSubmit;return Object(r.jsx)("div",{className:"inner",children:Object(r.jsxs)(R.a,{onSubmit:c((function(t){var a=Object(O.a)({},t);e(a)})),children:[Object(r.jsx)("h3",{children:"Register"}),Object(r.jsxs)(R.a.Group,{children:[Object(r.jsx)(R.a.Label,{children:"Username"}),Object(r.jsx)(R.a.Control,{autoFocus:!0,name:"username",required:!0,type:"text",placeholder:"Username",ref:a({required:!0})})]}),Object(r.jsxs)(R.a.Group,{children:[Object(r.jsx)(R.a.Label,{children:"Email"}),Object(r.jsx)(R.a.Control,{name:"email",required:!0,type:"email",placeholder:"Enter email",ref:a({required:!0})})]}),Object(r.jsxs)(R.a.Group,{children:[Object(r.jsx)(R.a.Label,{children:"Password"}),Object(r.jsx)(R.a.Control,{name:"password",required:!0,type:"password",placeholder:"Enter password",ref:a({required:!0})})]}),Object(r.jsx)(E.a,{type:"submit",block:!0,variant:"dark",size:"lg",children:"Register"}),Object(r.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(r.jsx)(o.b,{to:"/login",children:"log in?"})]})]})})},N=a(48),T=function(){var e=Object(n.useContext)(g),t=e.addTransaction,a=e.user,c=Object(v.a)(),s=c.register,i=c.handleSubmit;return Object(r.jsxs)(R.a,{className:"addForm",onSubmit:i((function(e){var r=Object(O.a)(Object(O.a)({},e),{},{amount:+e.amount,user_id:a._id,date:new Date(e.date)});t(r)})),children:[Object(r.jsxs)(R.a.Row,{children:[Object(r.jsx)(N.a,{children:Object(r.jsxs)(R.a.Group,{controlId:"expenseName",children:[Object(r.jsx)(R.a.Label,{children:"Description"}),Object(r.jsx)(R.a.Control,{name:"text",type:"text",ref:s({required:!0})})]})}),Object(r.jsx)(N.a,{children:Object(r.jsxs)(R.a.Group,{controlId:"expenseAmount",children:[Object(r.jsx)(R.a.Label,{children:"Amount"}),Object(r.jsx)(R.a.Control,{name:"amount",type:"number",ref:s({required:!0})})]})})]}),Object(r.jsxs)(R.a.Row,{children:[Object(r.jsx)(N.a,{children:Object(r.jsxs)(R.a.Group,{controlId:"expenseCategory",children:[Object(r.jsx)(R.a.Label,{children:"Category"}),Object(r.jsxs)(R.a.Control,{name:"category",as:"select",defaultValue:"0",custom:!0,ref:s({required:!0}),children:[Object(r.jsx)("option",{value:"0",disabled:!0,children:"Please Select"}),Object(r.jsx)("option",{children:"Groceries"}),Object(r.jsx)("option",{children:"Travel"}),Object(r.jsx)("option",{children:"Clothing"}),Object(r.jsx)("option",{children:"Rent"}),Object(r.jsx)("option",{children:"Pharmacy"}),Object(r.jsx)("option",{children:"Miscellaneous"})]})]})}),Object(r.jsx)(N.a,{children:Object(r.jsxs)(R.a.Group,{children:[Object(r.jsx)(R.a.Label,{children:"Select Date"}),Object(r.jsx)(R.a.Control,{name:"date",type:"date",ref:s({required:!0})})]})})]}),Object(r.jsx)(E.a,{variant:"primary",block:!0,size:"lg",type:"submit",children:"Add"})]})},w=a(50),k=a(53),S=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},A=function(e){var t=e.item,a=e.idx,c=Object(n.useContext)(g).deleteTransaction,s=t._id,i=t.text,o=t.amount,l=t.category,j=t.date,d=o<0?"-$".concat(Math.abs(o)):"$".concat(o),u=o<0?"expense":"income",b=new Date(j);return Object(r.jsxs)("tr",{className:"table-row",children:[Object(r.jsx)("td",{className:u,children:a+1}),Object(r.jsx)("td",{children:i}),Object(r.jsx)("td",{children:S(d)}),Object(r.jsx)("td",{children:l}),Object(r.jsx)("td",{children:b.toLocaleDateString()}),Object(r.jsx)("td",{children:Object(r.jsx)(k.a,{className:"delete-icon",onClick:function(){return c(s)}})})]})},I=function(){var e=Object(n.useContext)(g),t=e.transactions,a=e.fetchAllData;Object(n.useEffect)((function(){a()}),[]);var c=t.length>0?t.map((function(e,t){return Object(r.jsx)(A,{item:e,idx:t},e._id)})):Object(r.jsx)("tr",{children:Object(r.jsx)("td",{colSpan:"6",children:"No items added yet"})});return Object(r.jsxs)(w.a,{striped:!0,bordered:!0,hover:!0,size:"sm",id:"table",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"#"}),Object(r.jsx)("th",{children:"Description"}),Object(r.jsx)("th",{children:"Amount"}),Object(r.jsx)("th",{children:"Category"}),Object(r.jsx)("th",{children:"Date"}),Object(r.jsx)("th",{children:"X"})]})}),Object(r.jsx)("tbody",{children:c})]})},G=a(88),_=function(){var e=Object(n.useContext)(g).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2),t=e<0?"-$".concat(Math.abs(e)):"$".concat(e),a=e<0?"danger":"success";return Object(r.jsx)("div",{className:"total",children:Object(r.jsx)("h3",{children:Object(r.jsxs)(G.a,{variant:a,children:["Total: ",S(t)]})})})},D=function(){return Object(r.jsxs)("div",{id:"main",children:[Object(r.jsx)("div",{className:"title",children:Object(r.jsx)("h1",{children:"Expense Tracker with ReactJS"})}),Object(r.jsx)(T,{}),Object(r.jsx)("div",{className:"table-container",children:Object(r.jsx)(I,{})}),Object(r.jsx)(_,{})]})},U=a(90),q=a(89),F=a(92),P=function(){var e=Object(n.useContext)(g),t=e.isLoggedIn,a=e.logOut;return Object(r.jsx)(U.a,{id:"navbar",expand:"lg",bg:"light",children:Object(r.jsxs)(q.a,{className:"container",children:[Object(r.jsx)(U.a.Brand,{as:o.b,to:"/",children:"Expense Tracker"}),Object(r.jsx)(U.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(r.jsx)(U.a.Collapse,{id:"basic-navbar-nav",children:Object(r.jsxs)(F.a,{className:"mr-auto",children:[t&&Object(r.jsx)(F.a.Link,{as:o.b,to:"/",children:"Home"}),t&&Object(r.jsx)(F.a.Link,{onClick:function(){return a()},children:"LogOut"}),!t&&Object(r.jsx)(F.a.Link,{as:o.b,to:"/login",children:"Login"}),!t&&Object(r.jsx)(F.a.Link,{as:o.b,to:"/signup",children:"Sign-up"})]})})]})})},z=a(54),B=function(e){var t=e.type,a=Object(z.a)(e,["type"]),c=Object(n.useContext)(g).isLoggedIn;return"guest"===t&&c?Object(r.jsx)(l.a,{to:"/"}):"private"!==t||c?Object(r.jsx)(l.b,Object(O.a)({},a)):Object(r.jsx)(l.a,{to:"/login"})},M=function(){return Object(r.jsx)("div",{className:"loader center",children:Object(r.jsx)("div",{className:"lds-dual-ring"})})},$=function(){var e=Object(n.useContext)(g),t=e.getUser,a=e.isLoggedIn,c=e.loading;return Object(n.useEffect)((function(){a||t()}),[]),Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsx)(M,{}),Object(r.jsx)(P,{}),Object(r.jsx)("div",{className:"centered",children:Object(r.jsxs)(l.d,{children:[Object(r.jsx)(B,{path:"/login",type:"guest",children:Object(r.jsx)(C,{})}),Object(r.jsx)(B,{path:"/signup",type:"guest",children:Object(r.jsx)(L,{})}),Object(r.jsx)(B,{path:"/",exact:!0,type:"private",children:Object(r.jsx)(D,{})}),Object(r.jsx)(B,{path:"*",children:"404"})]})})]})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,93)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))};a(84);i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(f,{children:Object(r.jsx)(o.a,{basename:"/",children:Object(r.jsx)($,{})})})}),document.getElementById("root")),H()}},[[85,1,2]]]);
//# sourceMappingURL=main.89f992b3.chunk.js.map