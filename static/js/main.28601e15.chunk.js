(this["webpackJsonpexpense-tracker-mern"]=this["webpackJsonpexpense-tracker-mern"]||[]).push([[0],{84:function(e,t,r){},86:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(0),c=r.n(a),s=r(25),i=r.n(s),o=r(13),j=r(8),l=r(53),d=r(6),u=r.n(d),b=r(11),p=r(21),O=r(9),h=r(7),x=function(e,t){switch(t.type){case"FETCH_ALL_TRANSACTION":return Object(h.a)(Object(h.a)({},e),{},{transactions:t.payload});case"DELETE_TRANSACTION":return Object(h.a)(Object(h.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case"ADD_TRANSACTION":return Object(h.a)(Object(h.a)({},e),{},{transactions:[].concat(Object(O.a)(e.transactions),[t.payload])});case"USER_REGISTER":return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!0,user:t.payload});case"USER_LOGOUT":return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!1,user:t.payload});case"ERROR":return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});default:return e}},m=r(22),f=r.n(m),g={transactions:[],error:null,user:null,isLoggedIn:!1},y=Object(a.createContext)(g),v=function(e){var t=e.children,r=Object(a.useReducer)(x,g),c=Object(p.a)(r,2),s=c[0],i=c[1],o=Object(j.g)();function l(){return(l=Object(b.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.user){e.next=12;break}return t="/api/v1/transaction?user_id=".concat(s.user._id),e.prev=2,e.next=5,f.a.get(t);case 5:r=e.sent,i({type:"FETCH_ALL_TRANSACTION",payload:r.data.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i({type:"ERROR",payload:e.t0.response.data.error});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function d(){return(d=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/v1/transaction/".concat(t));case 3:i({type:"DELETE_TRANSACTION",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"ERROR",payload:e.t0.response.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function O(){return(O=Object(b.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,f.a.post("/api/v1/transaction/",t,r);case 4:n=e.sent,i({type:"ADD_TRANSACTION",payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i({type:"ERROR",payload:e.t0.response.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function h(){return(h=Object(b.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,f.a.post("/api/v1/user/signup",t,r);case 4:n=e.sent,console.log("response: ",n),i({type:"USER_REGISTER",payload:n.data.user}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i({type:"ERROR",payload:"Error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function m(){return(m=Object(b.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,f.a.post("/api/v1/user/login",t,r);case 4:n=e.sent,i({type:"USER_REGISTER",payload:n.data.user}),o.push("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),i({type:"ERROR",payload:"Error"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function v(){return(v=Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/api/v1/user/logout");case 3:i({type:"USER_LOGOUT",payload:null}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),i({type:"USER_LOGOUT",payload:null});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(n.jsx)(y.Provider,{value:{transactions:s.transactions,error:s.error,user:s.user,isLoggedIn:s.isLoggedIn,deleteTransaction:function(e){return d.apply(this,arguments)},addTransaction:function(e){return O.apply(this,arguments)},signUp:function(e){return h.apply(this,arguments)},login:function(e){return m.apply(this,arguments)},logOut:function(){return v.apply(this,arguments)},fetchAllData:function(){return l.apply(this,arguments)}},children:t})},R=(r(84),r(24)),C=r(91),E=r(88),T=function(){var e=Object(a.useContext)(y).login,t=Object(R.a)(),r=t.register,c=t.handleSubmit;return Object(n.jsx)("div",{className:"inner",children:Object(n.jsxs)(C.a,{onSubmit:c((function(t){var r=Object(h.a)({},t);e(r)})),children:[Object(n.jsx)("h3",{children:"Log in"}),Object(n.jsxs)(C.a.Group,{className:"form-group",children:[Object(n.jsx)(C.a.Label,{children:"Email"}),Object(n.jsx)(C.a.Control,{name:"email",required:!0,autoFocus:!0,type:"email",placeholder:"Enter your email",ref:r({required:!0})})]}),Object(n.jsxs)(C.a.Group,{className:"form-group",children:[Object(n.jsx)(C.a.Label,{children:"Password"}),Object(n.jsx)(C.a.Control,{name:"password",required:!0,type:"password",placeholder:"Enter your password",ref:r({required:!0})})]}),Object(n.jsx)(C.a.Group,{className:"form-group",children:Object(n.jsx)(C.a.Check,{type:"switch",id:"custom-switch",label:"Remember me"})}),Object(n.jsx)(E.a,{type:"submit",block:!0,variant:"dark",size:"lg",children:"Sign in"}),Object(n.jsxs)("p",{className:"forgot-password text-right",children:["Need an ",Object(n.jsx)(o.b,{to:"/signup",children:"Account?"})]})]})})},L=function(){var e=Object(a.useContext)(y).signUp,t=Object(R.a)(),r=t.register,c=t.handleSubmit;return Object(n.jsx)("div",{className:"inner",children:Object(n.jsxs)(C.a,{onSubmit:c((function(t){var r=Object(h.a)({},t);e(r)})),children:[Object(n.jsx)("h3",{children:"Register"}),Object(n.jsxs)(C.a.Group,{children:[Object(n.jsx)(C.a.Label,{children:"Username"}),Object(n.jsx)(C.a.Control,{autoFocus:!0,name:"username",required:!0,type:"text",placeholder:"Username",ref:r({required:!0})})]}),Object(n.jsxs)(C.a.Group,{children:[Object(n.jsx)(C.a.Label,{children:"Email"}),Object(n.jsx)(C.a.Control,{name:"email",required:!0,type:"email",placeholder:"Enter email",ref:r({required:!0})})]}),Object(n.jsxs)(C.a.Group,{children:[Object(n.jsx)(C.a.Label,{children:"Password"}),Object(n.jsx)(C.a.Control,{name:"password",required:!0,type:"password",placeholder:"Enter password",ref:r({required:!0})})]}),Object(n.jsx)(E.a,{type:"submit",block:!0,variant:"dark",size:"lg",children:"Register"}),Object(n.jsxs)("p",{className:"forgot-password text-right",children:["Already registered ",Object(n.jsx)(o.b,{to:"/login",children:"log in?"})]})]})})},k=r(49),w=function(){var e=Object(a.useContext)(y),t=e.addTransaction,r=e.user,c=Object(R.a)(),s=c.register,i=c.handleSubmit;return Object(n.jsxs)(C.a,{className:"addForm",onSubmit:i((function(e){var n=Object(h.a)(Object(h.a)({},e),{},{amount:+e.amount,user_id:r._id,date:new Date(e.date)});console.log(n),t(n)})),children:[Object(n.jsxs)(C.a.Row,{children:[Object(n.jsx)(k.a,{children:Object(n.jsxs)(C.a.Group,{controlId:"expenseName",children:[Object(n.jsx)(C.a.Label,{children:"Description"}),Object(n.jsx)(C.a.Control,{name:"text",type:"text",ref:s({required:!0})})]})}),Object(n.jsx)(k.a,{children:Object(n.jsxs)(C.a.Group,{controlId:"expenseAmount",children:[Object(n.jsx)(C.a.Label,{children:"Amount"}),Object(n.jsx)(C.a.Control,{name:"amount",type:"number",ref:s({required:!0})})]})})]}),Object(n.jsxs)(C.a.Row,{children:[Object(n.jsx)(k.a,{children:Object(n.jsxs)(C.a.Group,{controlId:"expenseCategory",children:[Object(n.jsx)(C.a.Label,{children:"Category"}),Object(n.jsxs)(C.a.Control,{name:"category",as:"select",defaultValue:"0",custom:!0,ref:s({required:!0}),children:[Object(n.jsx)("option",{value:"0",disabled:!0,children:"Please Select"}),Object(n.jsx)("option",{children:"Groceries"}),Object(n.jsx)("option",{children:"Travel"}),Object(n.jsx)("option",{children:"Clothing"}),Object(n.jsx)("option",{children:"Rent"}),Object(n.jsx)("option",{children:"Pharmacy"}),Object(n.jsx)("option",{children:"Miscellaneous"})]})]})}),Object(n.jsx)(k.a,{children:Object(n.jsxs)(C.a.Group,{children:[Object(n.jsx)(C.a.Label,{children:"Select Date"}),Object(n.jsx)(C.a.Control,{name:"date",type:"date",ref:s({required:!0})})]})})]}),Object(n.jsx)(E.a,{variant:"primary",block:!0,size:"lg",type:"submit",children:"Add"})]})},N=r(50),S=r(54),A=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},I=function(e){var t=e.item,r=e.idx,c=Object(a.useContext)(y).deleteTransaction,s=t._id,i=t.text,o=t.amount,j=t.category,l=t.date,d=o<0?"-$".concat(Math.abs(o)):"$".concat(o),u=o<0?"expense":"income";return Object(n.jsxs)("tr",{className:"table-row",children:[Object(n.jsx)("td",{className:u,children:r+1}),Object(n.jsx)("td",{children:i}),Object(n.jsx)("td",{children:A(d)}),Object(n.jsx)("td",{children:j}),Object(n.jsx)("td",{children:l}),Object(n.jsx)("td",{children:Object(n.jsx)(S.a,{className:"delete-icon",onClick:function(){return c(s)}})})]})},_=function(){var e=Object(a.useContext)(y),t=e.transactions,r=e.fetchAllData;Object(a.useEffect)((function(){r()}),[]);var c=t.length>0?t.map((function(e,t){return Object(n.jsx)(I,{item:e,idx:t},e._id)})):Object(n.jsx)("tr",{children:Object(n.jsx)("td",{colSpan:"6",children:"No items added yet"})});return Object(n.jsxs)(N.a,{striped:!0,bordered:!0,hover:!0,size:"sm",id:"table",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"#"}),Object(n.jsx)("th",{children:"Description"}),Object(n.jsx)("th",{children:"Amount"}),Object(n.jsx)("th",{children:"Category"}),Object(n.jsx)("th",{children:"Date"}),Object(n.jsx)("th",{children:"X"})]})}),Object(n.jsx)("tbody",{children:c})]})},G=r(89),q=function(){var e=Object(a.useContext)(y).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2),t=e<0?"-$".concat(Math.abs(e)):"$".concat(e),r=e<0?"danger":"success";return Object(n.jsx)("div",{className:"total",children:Object(n.jsx)("h3",{children:Object(n.jsxs)(G.a,{variant:r,children:["Total: ",A(t)]})})})},D=function(){return Object(n.jsxs)("div",{id:"main",children:[Object(n.jsx)("div",{className:"title",children:Object(n.jsx)("h1",{children:"Expense Tracker with ReactJS"})}),Object(n.jsx)(w,{}),Object(n.jsx)("div",{className:"table-container",children:Object(n.jsx)(_,{})}),Object(n.jsx)(q,{})]})},U=r(90),F=r(92),P=function(){var e=Object(a.useContext)(y),t=e.isLoggedIn,r=e.logOut;return Object(n.jsx)(U.a,{id:"navbar",expand:"lg",bg:"light",children:Object(n.jsxs)(l.a,{className:"container",children:[Object(n.jsx)(U.a.Brand,{as:o.b,to:"/",children:"Expense Tracker"}),Object(n.jsx)(U.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(n.jsx)(U.a.Collapse,{id:"basic-navbar-nav",children:Object(n.jsxs)(F.a,{className:"mr-auto",children:[t&&Object(n.jsx)(F.a.Link,{as:o.b,to:"/",children:"Home"}),t&&Object(n.jsx)(F.a.Link,{onClick:function(){return r()},children:"LogOut"}),!t&&Object(n.jsx)(F.a.Link,{as:o.b,to:"/login",children:"Login"}),!t&&Object(n.jsx)(F.a.Link,{as:o.b,to:"/signup",children:"Sign-up"})]})})]})})},z=r(55),B=function(e){var t=e.type,r=Object(z.a)(e,["type"]),c=Object(a.useContext)(y).isLoggedIn;return"guest"===t&&c?Object(n.jsx)(j.a,{to:"/"}):"private"!==t||c?Object(n.jsx)(j.b,Object(h.a)({},r)):Object(n.jsx)(j.a,{to:"/login"})},M=function(){return Object(n.jsx)(v,{children:Object(n.jsxs)(o.a,{basename:"/expense-tracker-mern",children:[Object(n.jsx)(P,{}),Object(n.jsx)(l.a,{className:"flex-container",children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(B,{path:"/login",type:"guest",children:Object(n.jsx)(T,{})}),Object(n.jsx)(B,{path:"/signup",type:"guest",children:Object(n.jsx)(L,{})}),Object(n.jsx)(B,{path:"/",exact:!0,type:"private",children:Object(n.jsx)(D,{})}),Object(n.jsx)(B,{path:"*",children:"404"})]})})]})})},$=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,93)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(M,{})}),document.getElementById("root")),$()}},[[86,1,2]]]);
//# sourceMappingURL=main.28601e15.chunk.js.map